import{c as N,e as U,j as t,f as c,g as _}from"./app-D5OvaHSW.js";import{a as A,d as M,g as w,A as K}from"./app-sidebar-layout-RSQG85XR.js";import{u as z,a as Q,T as q,b as j,P as B,c as F,d as P,e as g,f as R,g as H}from"./table-Dvb2sNuD.js";import{B as C}from"./app-logo-icon-D8Ng2klp.js";import{S as I}from"./spinner-BJPZVxCB.js";/* empty css            */import"./index-BVY35O7P.js";import"./index-CboAHRfP.js";import"./index-xhJfmw-v.js";function L(){const e=N.c(24),r=U();let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u={queryKey:["userskey"],queryFn:Y,staleTime:3e5},e[0]=u):u=e[0];const{data:b,isLoading:D}=z(u);let m;e[1]!==r?(m={mutationFn:X,onMutate:W,onError:V,onSuccess:O,onSettled:()=>{r.invalidateQueries({queryKey:["userskey"]})}},e[1]=r,e[2]=m):m=e[2];const v=Q(m);let i,a;e[3]!==r?(i=async s=>{await r.cancelQueries({queryKey:["userskey"]});const h=r.getQueryData(["userskey"]);return r.setQueryData(["userskey"],n=>(console.log(n),n&&{...n,users:n.users.map(T=>T.id===s.id?{...T,...s}:T)})),{previousUsers:h}},a=(s,h,n)=>{n?.previousUsers&&r.setQueryData(["userskey"],n.previousUsers),c.error("Error: Unauthorized Access"),console.log("Error editing user",s)},e[3]=r,e[4]=i,e[5]=a):(i=e[4],a=e[5]);let l;e[6]!==r?(l=()=>{r.invalidateQueries({queryKey:["userskey"]})},e[6]=r,e[7]=l):l=e[7];let d;e[8]!==i||e[9]!==a||e[10]!==l?(d={mutationFn:G,onMutate:i,onError:a,onSuccess:$,onSettled:l},e[8]=i,e[9]=a,e[10]=l,e[11]=d):d=e[11];const S=Q(d);let p;e[12]!==S?(p=(s,h)=>{const n=prompt("Please enter your name:",h);n!==""&&n!==null&&S.mutate({id:s,name:n})},e[12]=S,e[13]=p):p=e[13];const k=p;let f;e[14]!==v?(f=s=>{v.mutate(s)},e[14]=v,e[15]=f):f=e[15];const E=f;if(D){let s;return e[16]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsx("div",{className:"flex h-screen w-full items-center justify-center",children:t.jsx(I,{})}),e[16]=s):s=e[16],s}let y;e[17]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsx(P,{children:t.jsxs(q,{children:[t.jsx(g,{children:"ID"}),t.jsx(g,{children:"Name"}),t.jsx(g,{children:"Email"}),t.jsx(g,{children:"Actions"})]})}),e[17]=y):y=e[17];let o;e[18]!==b?.users||e[19]!==E||e[20]!==k?(o=b?.users?.map(s=>t.jsxs(q,{children:[t.jsx(j,{children:s.id}),t.jsx(j,{children:s.name}),t.jsx(j,{children:s.email}),t.jsxs(j,{className:"flex gap-2",children:[t.jsx(C,{className:"cursor-pointer",size:"sm",variant:"secondary",onClick:()=>k(s.id,s.name),children:t.jsx(B,{})}),t.jsx(C,{className:"cursor-pointer",size:"sm",variant:"destructive",onClick:()=>E(s.id),children:t.jsx(F,{})})]})]},s.id)),e[18]=b?.users,e[19]=E,e[20]=k,e[21]=o):o=e[21];let x;return e[22]!==o?(x=t.jsx("div",{children:t.jsxs(R,{children:[y,t.jsx(H,{children:o})]})}),e[22]=o,e[23]=x):x=e[23],x}function $(){c.success("User updated successfully")}function G(e){return _.put(A(e.id).url,e).then(J)}function J(e){return e?.data}function O(){c.success("User deleted successfully"),console.log("User deleted successfully")}function V(e){if(_.isAxiosError(e)&&e.response?.data?.message){c.error(e.response.data.message);return}c.error(e.message),console.log(e)}function W(){console.log("Deleting user")}async function X(e){return(await _.delete(M(e).url)).data}function Y(){return _.get(w().url).then(Z)}function Z(e){return e.data}L.layout=e=>t.jsx(K,{children:e});export{L as default};
